{"ast":null,"code":"import axios from \"axios\";\nconst BACKEND_URL = `http://localhost:3002`;\nconst REQUEST_TIMEOUT = 10000;\nconst HttpCode = {\n  UNAUTHORIZED: 401\n};\nexport const createAPI = onUnauthorized => {\n  const api = axios.create({\n    baseURL: BACKEND_URL,\n    timeout: REQUEST_TIMEOUT,\n    withCredentials: true\n  });\n\n  const onSuccess = response => response;\n\n  const onFail = err => {\n    const {\n      response\n    } = err;\n\n    if (response.status === HttpCode.UNAUTHORIZED) {\n      onUnauthorized();\n      throw err;\n    }\n\n    throw err;\n  };\n\n  api.interceptors.response.use(onSuccess, onFail);\n  return api;\n};","map":{"version":3,"names":["axios","BACKEND_URL","REQUEST_TIMEOUT","HttpCode","UNAUTHORIZED","createAPI","onUnauthorized","api","create","baseURL","timeout","withCredentials","onSuccess","response","onFail","err","status","interceptors","use"],"sources":["/Users/Pavel/Documents/учёба/Программирование/Файлы/Books/client/src/services/api.js"],"sourcesContent":["import axios from \"axios\";\n\nconst BACKEND_URL = `http://localhost:3002`;\nconst REQUEST_TIMEOUT = 10000;\n\nconst HttpCode = {\n  UNAUTHORIZED: 401\n};\n\nexport const createAPI = (onUnauthorized) => {\n  const api = axios.create({\n    baseURL: BACKEND_URL,\n    timeout: REQUEST_TIMEOUT,\n    withCredentials: true,\n  });\n\n  const onSuccess = (response) => response;\n\n  const onFail = (err) => {\n    const {response} = err;\n\n    if (response.status === HttpCode.UNAUTHORIZED) {\n      onUnauthorized();\n\n      throw err;\n    }\n   \n\n    throw err;\n  };\n\n  api.interceptors.response.use(onSuccess, onFail);\n\n  return api;\n};"],"mappings":"AAAA,OAAOA,KAAP,MAAkB,OAAlB;AAEA,MAAMC,WAAW,GAAI,uBAArB;AACA,MAAMC,eAAe,GAAG,KAAxB;AAEA,MAAMC,QAAQ,GAAG;EACfC,YAAY,EAAE;AADC,CAAjB;AAIA,OAAO,MAAMC,SAAS,GAAIC,cAAD,IAAoB;EAC3C,MAAMC,GAAG,GAAGP,KAAK,CAACQ,MAAN,CAAa;IACvBC,OAAO,EAAER,WADc;IAEvBS,OAAO,EAAER,eAFc;IAGvBS,eAAe,EAAE;EAHM,CAAb,CAAZ;;EAMA,MAAMC,SAAS,GAAIC,QAAD,IAAcA,QAAhC;;EAEA,MAAMC,MAAM,GAAIC,GAAD,IAAS;IACtB,MAAM;MAACF;IAAD,IAAaE,GAAnB;;IAEA,IAAIF,QAAQ,CAACG,MAAT,KAAoBb,QAAQ,CAACC,YAAjC,EAA+C;MAC7CE,cAAc;MAEd,MAAMS,GAAN;IACD;;IAGD,MAAMA,GAAN;EACD,CAXD;;EAaAR,GAAG,CAACU,YAAJ,CAAiBJ,QAAjB,CAA0BK,GAA1B,CAA8BN,SAA9B,EAAyCE,MAAzC;EAEA,OAAOP,GAAP;AACD,CAzBM"},"metadata":{},"sourceType":"module"}